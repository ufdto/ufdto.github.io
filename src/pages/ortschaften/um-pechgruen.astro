---
import BaseLayout from "../../layouts/BaseLayout.astro";
import DeepZoomMap from "../../components/deepzoom/DeepZoomMap.astro";
import { getCollection } from "astro:content";
import { ortschaftenUmPechgruen } from "../../maps/ortschaften-um-pechgruen";

// Chronik-Eintrag
export const chronik = {
  title: "Ortschaften um Pechgrün",
  subtitle: "Deep Zoom – Nachbardörfer und umliegende Orte",
  date: "2025-12-20",
  order: 1,
  bereich: "Ortschaften",
  href: "/ortschaften/um-pechgruen",
};

// Marker direkt aus src/content/ortschaften/*.md
const entries = await getCollection("ortschaften");
const markers = entries.map((e) => ({
  id: e.slug,
  x: e.data.x as number,
  y: e.data.y as number,
  label: e.data.label as string,
  title: e.data.title as string,
  href: `/ortschaften/${e.slug}`,
}));
---

<BaseLayout title="Ortschaften um Pechgrün">
  <main style="max-width:980px;margin:0 auto;">
    <h1 style="margin:0 0 0.35rem;">Ortschaften um Pechgrün</h1>

    <p style="margin:0 0 1rem; opacity:0.8;">
      Diese Karte zeigt die Ortschaften rund um Pechgrün im historischen Kontext.
      Die Marker lassen sich ein- und ausblenden und führen zu Detailseiten
      der jeweiligen Orte.
    </p>

    <DeepZoomMap {...ortschaftenUmPechgruen} markers={markers} height={640} />

    <section style="margin-top:2rem;">
      <h2>Hinweis zur Bedienung</h2>
      <ul>
        <li><strong>Zoomen:</strong> Mausrad oder Trackpad-Geste</li>
        <li><strong>Verschieben:</strong> klicken / gedrückt halten und ziehen</li>
        <li><strong>Marker:</strong> über den Button rechts unten ein- und ausblenden</li>
        <li>
          <strong>Autor-Funktion:</strong>
          <span style="white-space:nowrap;">Option&nbsp;/&nbsp;Alt&nbsp;+&nbsp;Klick</span>
          zeigt die Bildkoordinaten an (werden ins Clipboard kopiert)
        </li>
      </ul>
    </section>
  </main>
</BaseLayout>
